<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copain Bageri</title>
    <link rel="stylesheet" href="https://use.typekit.net/asf7weq.css">
    <link rel="stylesheet" href="style_p22_final.css">
    <link rel="icon" href="logo_green_clove_small.png" type="image/png">
</head>
<body>
    <!-- Header med logotype och meny -->
    <header class="header">
        <div class="logo">
            <img src="Logo_White_Transparent.PNG" alt="Copain Bageri Logotyp" class="header-logo">
        </div>
        <nav>
            <a href="#om-oss">Om oss</a>
            <a href="#sortiment">Sortiment</a>
            <a href="#forbestall">F√∂rbest√§ll</a>
        </nav>
    </header>

    <!-- Hero bild -->
    <section class="hero-picture"></section>

    <!-- Om oss sektion -->
    <section id="om-oss" class="section about-section">
        <h2>Om oss</h2>
        <p>P√• Copain Bageri √§r alla kompisar med alla! F√∂lj oss p√• Instagram @copainbageri</p>
    </section>

    <!-- Sortiment sektion -->
    <section id="sortiment" class="zigzag-section">
        <div class="zigzag-img">
            <div class="placeholder-img">
                V√•rt f√§rska sortiment
            </div>
        </div>
        <div class="zigzag-text">
            <h2>Sortiment</h2>
            <p>V√•rt dagsf√§rska sortiment inkluderar allt fr√•n klassiska surdegsbr√∂d och r√•gbr√∂d till s√∂ta godsaker som kanelbullar och croissanter.</p>
            
            <div class="inline-style-1">
                <strong>Specialiteter:</strong><br>
                ‚Ä¢ Surdegsbr√∂d och frallor<br>
                ‚Ä¢ Kanelbullar och kardemummabullar<br>
                ‚Ä¢ Croissanter och Tebirkes (YOLO)
            </div>
        </div>
    </section>

    <!-- F√∂rbest√§ll sektion -->
    <section id="forbestall" class="zigzag-section reverse">
        <div class="zigzag-img">
            <div class="placeholder-img">
                F√∂rbest√§ll dina favoriter
            </div>
        </div>
        <div class="zigzag-text">
            <h2>F√∂rbest√§ll</h2>
            <form name="bestallning" method="POST" data-netlify="true" data-netlify-recaptcha="true">
                <input type="hidden" name="form-name" value="bestallning" />
                <p class="hidden">
                    <label>Fyll inte i detta om du √§r m√§nniska: <input name="bot-field" /></label>
                </p>
                <p>
                    <label for="name" data-key="name">Namn:</label>
                    <input type="text" id="name" name="name" required>
                </p>
                <p>
                    <label for="email" data-key="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </p>
                <p>
                    <label for="date" data-key="date">√ñnskat datum:</label>
                    <input type="date" id="date" name="date">
                </p>
                <p>
                    <label for="message" data-key="message">Din best√§llning:</label>
                    <textarea id="message" name="message" rows="5" required></textarea>
                </p>
                <div class="recaptcha-wrapper">
                    <div data-netlify-recaptcha="true"></div>
                </div>
                <p>
                    <button type="submit" class="btn">Skicka best√§llning</button>
                </p>
                <p style="font-size:0.95em;color:#555;margin-top:-0.5em;" data-key="gdpr">
                    üîí Vi behandlar dina uppgifter enligt GDPR. De anv√§nds endast f√∂r att hantera din f√∂rfr√•gan och sparas inte l√§ngre √§n n√∂dv√§ndigt.
                </p>
                <p style="font-size:0.95em;color:#555;margin-top:-1em;">
                    <a href="Integritetspolicy.pdf" target="_blank" style="color:#091f09;text-decoration:underline;" data-key="policy">L√§s v√•r integritetspolicy h√§r</a>
                </p>
            </form>
            <div id="form-thankyou" data-key="formThankYou" style="display:none;text-align:center;font-size:1.2em;color:#155724;background:#d4edda;border-radius:8px;padding:2em 1em;margin-top:2em;max-width:500px;margin-left:auto;margin-right:auto;">
                Tack f√∂r din best√§llning! Vi √•terkommer s√• snart vi kan.
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="contact-info">
            <div class="contact-item">
                <h4>Adress</h4>
                <p>Sankt Sigfrids Plan 7<br>412 66 G√∂teborg</p>
            </div>
            <div class="contact-item">
                <h4>Telefon</h4>
                <p>031-123 456</p>
            </div>
            <div class="contact-item">
                <h4>Instagram</h4>
                <p>@copainbageri</p>
            </div>
        </div>
        <div class="footer-logo-large">
            <img src="logo_green_clove.png" alt="Copain Bageri Logotyp" class="footer-logo-large">
        </div>
    </footer>

    <!-- Add this script just before the closing </body> tag -->
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form[name="bestallning"]');
    const submitButton = form.querySelector('button[type="submit"]');
    const errorMsg = document.createElement('div');
    errorMsg.style.color = '#c00';
    errorMsg.style.marginTop = '0.5em';
    errorMsg.style.fontWeight = 'bold';
    errorMsg.style.display = 'none';
    errorMsg.textContent = 'V√§nligen verifiera reCAPTCHA innan du skickar.';
    submitButton.parentNode.appendChild(errorMsg);

    const successMsg = document.createElement('div');
    successMsg.style.color = '#155724';
    successMsg.style.background = '#d4edda';
    successMsg.style.borderRadius = '8px';
    successMsg.style.padding = '1em';
    successMsg.style.marginTop = '1em';
    successMsg.style.fontWeight = 'bold';
    successMsg.style.display = 'none';
    successMsg.textContent = 'Tack f√∂r din best√§llning! Vi √•terkommer s√• snart vi kan.';
    submitButton.parentNode.appendChild(successMsg);

    document.getElementById('date').removeAttribute('required');

    function validateForm() {
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const message = document.getElementById('message').value.trim();
        submitButton.disabled = !(name && email && message);
    }

    ['name', 'email', 'message'].forEach(fieldId => {
        document.getElementById(fieldId).addEventListener('input', validateForm);
    });

    validateForm();

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        // Try to find the Netlify reCAPTCHA checkbox inside the iframe
        const recaptchaFrame = document.querySelector('.recaptcha-wrapper iframe');
        let recaptchaChecked = false;

        if (recaptchaFrame) {
            try {
                const recaptchaDoc = recaptchaFrame.contentDocument || recaptchaFrame.contentWindow.document;
                const checkbox = recaptchaDoc.querySelector('input[type="checkbox"]');
                if (checkbox && checkbox.checked) {
                    recaptchaChecked = true;
                }
            } catch (err) {
                recaptchaChecked = true;
            }
        } else {
            recaptchaChecked = true;
        }

        if (!recaptchaChecked) {
            errorMsg.style.display = 'block';
            return;
        } else {
            errorMsg.style.display = 'none';
        }

        // AJAX submit to Netlify
        const formData = new FormData(form);
        fetch(form.action || '/', {
            method: 'POST',
            body: formData,
            headers: { 'Accept': 'application/json' }
        })
        .then(response => {
            if (response.ok) {
                form.reset();
                successMsg.style.display = 'block';
            } else {
                response.json().then(data => {
                    errorMsg.textContent = data.error || 'N√•got gick fel. F√∂rs√∂k igen!';
                    errorMsg.style.display = 'block';
                });
            }
        })
        .catch(() => {
            errorMsg.textContent = 'N√•got gick fel. F√∂rs√∂k igen!';
            errorMsg.style.display = 'block';
        });
    });
});
</script>
</body>
</html>